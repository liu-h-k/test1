(function(e){function t(t){for(var o,r,s=t[0],l=t[1],c=t[2],h=0,u=[];h<s.length;h++)r=s[h],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(u.length)u.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={app:0},a=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0c7d":function(e,t,n){"use strict";n("bd17")},"3bcd":function(e,t,n){"use strict";n("b642")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function i(e,t,n,i,a,r){var s=Object(o["resolveComponent"])("HelloWorld");return Object(o["openBlock"])(),Object(o["createBlock"])(s,{msg:"Welcome to Your Vue.js App"})}var a=n("f759"),r=n.n(a),s=function(e){return Object(o["pushScopeId"])("data-v-1bf060b6"),e=e(),Object(o["popScopeId"])(),e},l={class:"config_btn"},c=Object(o["createTextVNode"])("切换视角"),d=Object(o["createTextVNode"])("虚化"),h={class:"btn-tool"},u={class:"item1"},p=s((function(){return Object(o["createElementVNode"])("span",null,"x",-1)})),f=s((function(){return Object(o["createElementVNode"])("span",null,"y",-1)})),m=s((function(){return Object(o["createElementVNode"])("span",null,"z",-1)})),b=s((function(){return Object(o["createElementVNode"])("span",null,"x",-1)})),g=s((function(){return Object(o["createElementVNode"])("span",null,"y",-1)})),w=s((function(){return Object(o["createElementVNode"])("span",null,"z",-1)})),v=s((function(){return Object(o["createElementVNode"])("img",{src:r.a,alt:""},null,-1)})),y=[v];function O(e,t,n,i,a,r){var s=Object(o["resolveComponent"])("el-button"),v=Object(o["resolveDirective"])("loading");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("div",l,[Object(o["createVNode"])(s,{type:"primary",onClick:r.changeCamera,size:"small"},{default:Object(o["withCtx"])((function(){return[c]})),_:1},8,["onClick"]),Object(o["createVNode"])(s,{type:"primary",onClick:r.setOpacity,size:"small"},{default:Object(o["withCtx"])((function(){return[d]})),_:1},8,["onClick"])]),Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{ref:"threeBox",class:"threeBox",onClick:t[0]||(t[0]=function(){return r.getModel&&r.getModel.apply(r,arguments)})},[Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("ul",null,[Object(o["createElementVNode"])("li",null,[p,Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(a.position.x1),1)]),Object(o["createElementVNode"])("li",null,[f,Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(a.position.y1),1)]),Object(o["createElementVNode"])("li",null,[m,Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(a.position.z1),1)])]),Object(o["createElementVNode"])("ul",null,[Object(o["createElementVNode"])("li",null,[b,Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(a.position.x2),1)]),Object(o["createElementVNode"])("li",null,[g,Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(a.position.y2),1)]),Object(o["createElementVNode"])("li",null,[w,Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(a.position.z2),1)])])])]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.deviceList,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"icon",style:Object(o["normalizeStyle"])({left:e.left+"px",top:e.top+"px"}),key:t},y,4)})),128))])),[[v,a.loading]])])}n("d3b7"),n("159b");var x=n("d4ec"),j=n("bee2"),A=(n("d81d"),n("b0c0"),n("7db0"),n("4de4"),n("a9e3"),n("5a89")),k=n("34ad"),S=n("4721"),M=n("32d9"),z=n("93e9"),E=n("4e15"),N=n("360d"),B=n("6c18"),V=n("cfa2"),C=n("22b5"),I=new A["wb"],P=null,L=null,T=null,D=function(){function e(t){Object(x["a"])(this,e),console.log(t),this.el=t.el,this.url=t.url,this.mtl=t.mtl,this.controlsCB=t.controlsCB,this.update=t.update,this.getWH(),this.initDraw()}return Object(j["a"])(e,[{key:"getWH",value:function(){this.el?(this.width=this.el.offsetWidth,this.height=this.el.offsetHeight):(this.width=window.clientWidth,this.height=window.clientHeight)}},{key:"initDraw",value:function(){this.createcamera(),this.createLight(),console.log(I),this.createRender(),this.renderScene(),this.createBox(),this.createPlane(),this.orbitControls(),this.createInstance()}},{key:"createcamera",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fov:45,aspect:this.width/this.height,near:.1,far:1e5,x:-100,y:100,z:1e3};if(!this.camera){this.camera=new A["ib"](e.fov,e.aspect,e.near,e.far),this.camera.rotation.x=Math.PI/2,this.camera.position.set(0,200,0);var t=new A["j"](this.camera,1e3);I.add(t),this.camera.lookAt(0,0,0)}}},{key:"createLight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"spot",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0x00ff00",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(console.log(e,"啥啊"),"ambient"==e)this.light1||(this.light1=new A["b"](t,n),this.light1.castShadow=!0,I.add(this.light1));else if("directional"==e)this.light2||(this.light2=new A["p"](t,n),this.light2.castShadow=!0,I.add(this.light2));else if("point"==e)this.light3||(this.light3=new A["kb"](t,n),this.light3.position.set(0,50,0),I.add(this.light3));else if("spot"==e){this.light4=new A["Db"](16777215,1),this.light4.position.set(50,50,0),this.light4.castShadow=!0,this.light4.shadow.mapSize.width=2048,this.light4.shadow.mapSize.height=2048,this.light4.intensity=.7,this.light4.distance=200,this.light4.penumbra=0,this.light4.decay=1,this.light4.foucs=1,this.light4.angle=Math.PI/4,I.add(this.light4);var o=new A["Eb"](this.light4);I.add(o)}}},{key:"createRender",value:function(){this.renderer=new A["Tb"]({antialias:!0,alpha:!0,premultipliedAlphaL:!0,preserveDrawingBuffer:!0}),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(12303291,1),this.renderer.shadowMap.enabled=!0,this.renderer.xr.enabled=!0,this.renderer.xr.setReferenceSpaceType("local"),this.renderer.outputEncoding=A["Ub"],this.renderer.shadowMap.type=A["hb"],this.renderer.logarithmicDepthBuffer=!0,this.el.appendChild(this.renderer.domElement)}},{key:"loadModel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"glb";"glb"==e&&(console.log(111),this.model=new k["a"],this.model.load(this.url,(function(e){e.scene.traverse((function(e){e.isMesh&&(e.material.emissive=e.material.color,e.material.emissiveMap=e.material.map)})),I.add(e.scene)}),(function(e){parseInt(e.loaded/e.total*100)}),(function(e){console.log(e,"moxing")})))}},{key:"renderScene",value:function(){var e=this;this.clock=new A["m"];var t=function t(){if(e.renderer.clear(),e.renderer.render(I,e.camera),L&&L.render(),e.controls&&e.controls.update(),e.animateModel){var n=.001*performance.now();e.animateModel.position.y=5*Math.sin(n)+1,e.animateModel.rotation.y+=.01}e.updateInstance(),requestAnimationFrame(t)};t()}},{key:"createBox",value:function(){var e=new A["g"],t=new A["T"]({color:0}),n=new A["S"](e,t);n.name="1",this.createLine(e),n.castShadow=!0,I.add(n),this.animateModel=n;var o=new A["g"],i=new A["T"]({color:16777215}),a=new A["S"](o,i);a.position.set(2,0,0),a.name="2",this.createLine(e),a.castShadow=!0,I.add(a),this.camera.position.z=2;var r=new A["g"](10,10,8),s=new A["V"]({color:65280});n=new A["S"](r,s),n.position.x=25,n.position.y=5,n.castShadow=!0,I.add(n);var l=new A["jb"](100,100),c=new A["W"]({color:16776960}),d=new A["S"](l,c);d.rotation.x=-Math.PI/2,d.position.y=-0,d.position.z=-10,d.castShadow=!0,d.receiveShadow=!0,I.add(d);var h=new A["w"];h.castShadow=!0,h.receiveShadow=!0,h.add(d),h.add(n);var u=new A["g"](10,5,10),p=new A["W"]({color:16776960}),f=new A["S"](u,p);f.position.z=-10;var m=new A["Bb"](15,30,16),b=new A["W"]({color:16711935}),g=new A["S"](m,b);g.position.z=-35,h.castShadow=!0,h.receiveShadow=!0,h.add(f),h.add(g),console.log(h,this.camera,123),h.rotation.y=-Math.PI/2,I.add(h);var w=new A["Bb"](5,32,32),v=new A["W"]({color:15790320}),y=new A["S"](w,v);y.position.x=-20,y.name="圆",I.add(y)}},{key:"createPlane",value:function(){}},{key:"createLine",value:function(e){var t=new A["r"](e,2),n=new A["G"]({color:0}),o=new A["I"](t,n);I.add(o)}},{key:"outLight",value:function(e){L=new M["a"](this.renderer),P=new z["a"](I,this.camera),L.addPass(P),T=new E["a"](new A["Ob"](this.width,this.height),I,this.camera,e),T.selectedObjects=e,T.edgeStrength=50,T.edgeGlow=.5,T.usePatternTexture=!1,T.edgeThickness=5,T.downSampleRatio=1,T.pulsePeriod=1.7,T.visibleEdgeColor.set(parseInt(16711680)),T.hiddenEdgeColor=new A["n"](0,0,0),T.clear=!0,L.addPass(T);var t=new N["a"](B["a"]);t.uniforms.resolution.value.set(1/window.innerWidth,1/window.innerHeight),t.renderToScreen=!0,L.addPass(t)}},{key:"objVirtualization",value:function(e,t){e.traverse((function(e){e.isMesh&&(e.material.transparent=!0,e.material.opacity=t?.5:1,e.material.depthWrite=!t,e.material.depthTest=!t)}))}},{key:"createInstance",value:function(){for(var e=new A["k"](1,32),t=(new A["Kb"]).load(n("5a52")),o=new A["T"]({map:t,transparent:!0,color:new A["n"]("rgb(255, 255, 255)")}),i=new A["z"](e,o,1),a=new A["fb"],r=0;r<1;r++)a.position.set(-30,6,2),a.scale.set(3,3,3),a.updateMatrix(),i.setMatrixAt(r,a.matrix);i.modelType="instanceMesh",I.add(i)}},{key:"updateInstance",value:function(){var e=this.getAllModel().find((function(e){return"instanceMesh"==e.modelType}));if(e)for(var t=new A["fb"],n=0;n<1;n++)t.position.set(-30,6,2),t.scale.set(3,3,3),t.lookAt(this.camera.position.x,this.camera.position.y,this.camera.position.z),t.updateMatrix(),e.setMatrixAt(n,t.matrix),e.instanceMatrix.needsUpdate=!0}},{key:"addMarker",value:function(){var e=(new A["Kb"]).load(n("5a52")),t=new A["Gb"]({map:e,sizeAttenuation:!0}),o=new A["Fb"](t);I.add(o),o.center.set(.5,0),o.scale.set(10,10,10),o.position.set(60,0,0)}},{key:"orbitControls",value:function(){var e=this;console.log(S["a"]),this.controls=new S["a"](this.camera,this.renderer.domElement),this.controls.addEventListener("change",(function(){e.controlsCB&&e.controlsCB({type:"controls"})})),setTimeout((function(){e.controlsCB({type:"controls"})}),2e3)}},{key:"getModel",value:function(e,t){var n=new A["Ob"];n.x=e.offsetX/this.width*2-1,n.y=-e.offsetY/this.height*2+1;var o=new A["ub"];o.setFromCamera(n,this.camera);var i=o.intersectObjects(I.children,!0);if(i.length){var a=i.filter((function(e){return"Mesh"==e.object.type}));t(a)}}},{key:"getAllModel",value:function(){return I.children.filter((function(e){if("Group"==e.type||"Mesh"==e.type||"InstancedMesh"==e.type)return e}))}},{key:"animateCamera",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0,z:0},o=arguments.length>2?arguments[2]:void 0,i=new C.Tween({x1:this.camera.position.x,y1:this.camera.position.y,z1:this.camera.position.z,x2:this.controls.target.x,y2:this.controls.target.y,z2:this.controls.target.z});console.log(i,"啥啊"),i.to({x1:Number(e.x),y1:Number(e.y),z1:Number(e.z),x2:Number(n.x||0),y2:Number(n.y||0),z2:Number(n.z||0)},1e3),i.onUpdate((function(e){t.camera.position.x=e.x1,t.camera.position.y=e.y1,t.camera.position.z=e.z1,t.controls.target.x=e.x2,t.controls.target.y=e.y2,t.controls.target.z=e.z2,t.controls.update()})),i.onComplete((function(){t.controls.enabled=!0,o&&o()})),i.easing(C.Easing.Cubic.InOut),i.start()}},{key:"addSun",value:function(){var e=new A["Db"](16777215);e.position.set(50,10,-50),I.add(e);var t=A["y"].loadTexture("./20160106164812372.png"),n=A["y"].loadTexture("./20160106164714428.png"),o=new A["n"](16777215),i=new V["LensFlare"](t,350,0,A["a"],o);i.add(n,60,.6,A["a"]),i.add(n,70,.7,A["a"]),i.add(n,120,.9,A["a"]),i.add(n,70,1,A["a"]),i.position=e.position,I.add(i)}},{key:"getPosition",value:function(){return{cameraX:parseInt(this.camera.position.x),cameraY:parseInt(this.camera.position.y),cameraZ:parseInt(this.camera.position.z),controlsX:parseInt(this.controls.target.x),controlsY:parseInt(this.controls.target.y),controlsZ:parseInt(this.controls.target.z)}}}]),e}(),W=D,Y=n("44ba"),F=n.n(Y),H={name:"HelloWorld",props:{msg:String},data:function(){return{three:null,loading:!1,loadText:"0%",svg:'\n                <path class="path" d="\n                M 30 15\n                L 28 17\n                M 25.61 25.61\n                A 15 15, 0, 0, 1, 15 30\n                A 15 15, 0, 1, 1, 27.99 7.5\n                L 15 15\n                " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>\n            ',local:"",deviceList:[],pos1:{x:1,y:1,z:1},pos2:{x:1,y:1,z:1},position:{x1:0,x2:0,y1:0,y2:0,z1:0,z2:0},isOpacity:!1}},mounted:function(){var e=this;this.three=new W({el:document.getElementsByClassName("threeBox")[0],controlsCB:function(){var t=e.three.getPosition(),n=t.cameraX,o=t.cameraY,i=t.cameraZ,a=t.controlsX,r=t.controlsY,s=t.controlsZ;e.position.x1=n,e.position.y1=o,e.position.z1=i,e.position.x2=a,e.position.y2=r,e.position.z2=s}});var t=this.three.getPosition(),n=t.cameraX,o=t.cameraY,i=t.cameraZ,a=t.controlsX,r=t.controlsY,s=t.controlsZ;this.position.x1=n,this.position.y1=o,this.position.z1=i,this.position.x2=a,this.position.y2=r,this.position.z2=s},methods:{getModel:function(e){var t=this;this.three.getModel(e,(function(e){if(console.log(e,t.three.controls,123),e.length){var n=e[0].object.position,o=n.x,i=n.y,a=n.z;t.three.controls.target.x=o,t.three.controls.target.y=i,t.three.controls.target.z=a}}))},changeCamera:function(){this.pos1.y+=1,this.pos2.x+=.1,this.three.animateCamera(this.pos1,this.pos2m,(function(){console.log("节俗")}))},setOpacity:function(){var e=this;this.isOpacity=!this.isOpacity,this.three.getAllModel().forEach((function(t){console.log(t),"Group"==t.type?t.children.forEach((function(t){e.three.objVirtualization(t,e.isOpacity)})):e.three.objVirtualization(t,e.isOpacity)}))},initAnnyang:function(){if(F.a){alert(1);var e={hello:function(){alert("Hello world!")}};F.a.addCommands(e),F.a.start()}}}},R=(n("3bcd"),n("6b0d")),K=n.n(R);const U=K()(H,[["render",O],["__scopeId","data-v-1bf060b6"]]);var Z=U,X={name:"App",components:{HelloWorld:Z}};n("0c7d");const G=K()(X,[["render",i]]);var J=G,_=n("c3a1");n("7437");Object(o["createApp"])(J).use(_["a"]).mount("#app")},"5a52":function(e,t,n){e.exports=n.p+"img/lensflare0.614e5f0f.png"},b642:function(e,t,n){},bd17:function(e,t,n){},f759:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAmhJREFUSEu1lU9IFFEcx7+/WUWY5yJCtw4KMW/NQAgRumw4b5cKiwIhD9Ehoktd7M+pU3rq1B8vdYnoEB0MBKOkcp2R9hKIl8A/O0Ogh26BiL4B0Z1fzOQuO2oR2/qO7/1+n/f9fd93GMIhLarlzvgtxwykrtZzV4jy65y19b3SmwR75gSB2usBM3gtJ4PBfWB3Aa1hs/hBwE0l9Zu9cMcTbrSnpLYPOLvCwHNjWx+1T2AzOq8qdnxxlhkTBhu9dmZjudLs+OZ1Ysoy0LnbsMLERWUFLys1bindFVI4T4RBZelPCbDrmw+YkVcyyFYbPDHOwAADi8T4Fu0zoYeAbgKmbKmHqgI8s0iEgm0Fo0nFnvgIoKSkHo4OnJJ4DANnmkBDp63Nxdrxv/it3TvgcYT4rDL6blzviTEAGSX1uQR4xhPrAIZzUr/aLXSJeLaiYK+vvyek/ornM564BmAsJ3VbFVwopbMGhYUwRF++S8cjR4oZOG8Q37Nl8L4W7HrmhZDpEQEfKooLy6LHMDAXspHPZzaK8eM5vrgPxiUl9akkIPb4MoCfBMSpYCBKxREC3tZ6vDvlVxAmlaUfxmDXF1PMvKJkcGtflP4hFTUP+IyIOm1LD8TgyN94ZCt48aeP4285rqbIN29EFkU+0/SCeTLVTPMoc586Hsz/D9hZMnuRornyNvfS9FJrfyrFsX+NWuUy2VUwEY80AsxMIwmwkpqKq23tO1s7HfVc0NTStJrtWF9zPMH7wK4vnjDjdj1gIjy1LX3nQPChKG64x5PLSKcN8Q5Afz0WHNAzuxHqi4k/SIPAMebQwL8Af/g0u+lA/bkAAAAASUVORK5CYII="}});